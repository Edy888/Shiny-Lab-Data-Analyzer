graph TB
    subgraph "global.R"
        A[Библиотеки] --> B[Цветовая схема]
        B --> C[Тема оформления]
    end

    subgraph "ui.R"
        D[page_sidebar] --> E[Sidebar]
        D --> F[Main Panel]
        
        E --> G[Параметры 4PL модели]
        G --> |P1-P4| H[NumericInputs]0
        E --> I[Параметры концентрации]
        I --> |min/max| J[NumericInputs]
        E --> K[Параметры калибровки]
        K --> |slope/intercept| L[NumericInputs]
        
        F --> M[График]
        F --> N[Элементы управления]
        N --> O[Шкала оси X]
        N --> P[Диапазоны осей]
    end

    subgraph "server.R"
        Q[Реактивные выражения] --> R[x_range_values]
        Q --> S[plot_data]
        Q --> T[y_range_limits]
        
        U[Обработчики событий] --> V[observeEvent x_range]
        U --> W[observeEvent y_range]
        
        X[Выходные элементы] --> Y[x_range_ui]
        X --> Z[y_range_ui]
        X --> AA[mcd_plot]
        
        S --> |Модель 4PL| BB[Расчет кривых]
        BB --> |rlu_sim| CC[Основная кривая]
        BB --> |rlu_lab| DD[Калибровочная кривая]
        BB --> |rlu_low/high| EE[Доверительный интервал]
    end

    style global.R fill:#f9f,stroke:#333
    style ui.R fill:#bbf,stroke:#333
    style server.R fill:#bfb,stroke:#333
    
    Описание основных компонентов:

global.R

Загрузка библиотек (shiny, bslib, ggplot2, plotly, dplyr)
Определение цветовой схемы Siemens Healthineers
Настройка темы оформления приложения
ui.R

Sidebar (левая панель):
Параметры 4PL модели (P1-P4)
Параметры концентрации (min/max)
Параметры калибровки (slope/intercept)
Main Panel (основная панель):
График
Переключатель шкалы оси X
Слайдеры диапазонов осей X и Y
server.R

Реактивные выражения:
x_range_values: расчет диапазона оси X
plot_data: генерация данных для графика
y_range_limits: расчет диапазона оси Y
Обработчики событий:
Обновление слайдеров при изменении параметров
Построение графика:
Основная кривая (4PL модель)
Калибровочная кривая
Доверительный интервал
Вертикальные линии концентраций
Поток данных:

Пользователь вводит параметры в sidebar
Реактивные выражения пересчитывают данные
Обновляются диапазоны осей и график
График отображает:
Основную кривую (petrol)
Калибровочную кривую (orange)
Доверительный интервал (magenta)
Вертикальные линии на концентрациях 1 и 200